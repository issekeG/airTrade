<header id="header" class="header fixed-top d-flex align-items-center">
  <div class="d-flex align-items-center justify-content-between">
    <a href="{{ path('app_home') }}" class="logo d-flex align-items-center">
      <img src="" alt="">
      <span class="d-none d-lg-block">AirTradeLogo</span>
    </a>
    {% block sidebarIcon %}
      <i class="bi bi-list toggle-sidebar-btn d-block d-lg-none"></i>
    {% endblock sidebarIcon %}
  </div><!-- End Logo -->

  <nav class="header-nav ms-auto">
    <ul class="d-flex align-items-center">
      <li class="nav-item dropdown pe-3">
        <a class="nav-link" href="{{ path('app_blog_listing') }}">
          {{ 'header.blog'|trans }}
        </a>
      </li>
      <li class="nav-item dropdown pe-3">
        {% if app.user %}
          <a style="background-color: #1A0B8C;" href="https://wa.me/+212612405068?text=Bonjour%2C+je+souhaite+plus+d'informations" target="_blank" class="btn py-1 text-white">
            {{ 'header.whatsapp'|trans }}
          </a>
        {% else %}
          <a
                  class="btn py-1 text-white"
                  style="background-color: #1A0B8C;"
                  data-bs-toggle="popover"
                  data-bs-placement="bottom"
                  data-bs-html="true"
                  data-bs-trigger="focus"
                  title="{{ 'header.restricted_access'|trans }}"
                  data-bs-content='{% set login_url = path("app_login") %}{{ "header.please_login"|trans({"%url%": login_url})|raw }}'
          >
            {{ 'header.whatsapp'|trans }}
          </a>
        {% endif %}
      </li>
      <li class="nav-item dropdown px-3 d-flex align-items-center">
        <!-- Afficher le drapeau de la langue sélectionnée -->
        {% if app.request.locale == "en" %}
          <span class="flag-icon flag-icon-gb me-2"></span>
        {% else %}
          <span class="flag-icon flag-icon-{{ app.request.locale }} me-2"></span>
        {% endif %}

        <!-- Formulaire de sélection de langue -->
        <form method="get" action="{{ path('change-locale') }}">
          <select name="_locale" onchange="this.form.submit()" class="form-select form-select-sm">
            {% for code, lang in available_languages.getAvailableLanguages() %}
              <option value="{{ code }}" {% if code == app.request.locale %}selected{% endif %}>
                {{ lang.label }}
              </option>
            {% endfor %}
          </select>
          {# Conserve les autres paramètres GET #}
          {% for key, value in app.request.query.all() %}
            {% if key != '_locale' %}
              {% if value is iterable %}
                {% for v in value %}
                  <input type="hidden" name="{{ key }}[]" value="{{ v }}">
                {% endfor %}
              {% else %}
                <input type="hidden" name="{{ key }}" value="{{ value }}">
              {% endif %}
            {% endif %}
          {% endfor %}
        </form>
      </li>

      <li class="nav-item dropdown pe-3">
        {% if app.user %}
          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <span class="d-none d-md-block dropdown-toggle ps-2">{{ app.user.firstname }}</span>
          </a><!-- End Profile Iamge Icon -->

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
            <li class="dropdown-header">
              <h6>{{ app.user.firstname }}</h6>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="{{ path('user_profile', {'id': app.user.id, 'page': 'ads'}) }}">
                <i class="bi bi-person"></i>
                <span>{{ 'header.my_profile'|trans }}</span>
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="{{ path('app_aircraft_new') }}">
                <i class="bi bi-plus-circle"></i>
                <span>{{ 'header.sell_plane'|trans }}</span>
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="">
                <i class="bi bi-eye-fill"></i>
                <span>{{ 'header.public_profile'|trans }}</span>
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="{{ path('app_logout') }}">
                <i class="bi bi-box-arrow-right"></i>
                <span>{{ 'header.logout'|trans }}</span>
              </a>
            </li>
          </ul>
        {% else %}
          <a class="nav-link" href="{{ path('app_login') }}">
            <i class="bi bi-box-arrow-in-right me-1"></i> {{ 'header.login'|trans }}
          </a>
        {% endif %}
      </li><!-- End Profile Nav -->
    </ul>
  </nav><!-- End Icons Navigation -->
</header>
